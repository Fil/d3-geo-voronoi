<!DOCTYPE html>
<html>

<head>
    <title>BenchMark: Sphere</title>
</head>

<body>

    <meta charset="utf-8">
    <style>
        #sphere {
            stroke: #444;
            stroke-width: 2;
        }

        .polygons {
            stroke: #444;
        }

        .sites {
            stroke: black;
            fill: white;
        }
    </style>

    <h1>Benchmark: Sphere</h1>
    <h3>d3-geo-voronoi</h3>
    <svg width="960" height="600"></svg>
    <h2> Suggestion: </h2>
    <p> Enable the browsers FPS meter. </p>

    <script src="https://unpkg.com/d3@6"></script>
    <script src="../dist/d3-geo-voronoi.js"></script>

    <script>
        var points = {
            type: "FeatureCollection",
            features: d3.range(100).map(function () {
                return {
                    type: "Point",
                    coordinates: [360 * Math.random(), 180 * Math.random() -90 ]
                }
            })
        }
        var v = d3.geoVoronoi()(points);
        var projection = d3.geoOrthographic(),
            path = d3.geoPath().projection(projection);
        var svg = d3.select("svg");
        svg.append('path')
            .attr('id', 'sphere')
            .datum({ type: "Sphere" })
            .attr('d', path);
        svg.append('g')
            .attr('class', 'polygons')
            .selectAll('path')
            .data(v.polygons().features)
            .enter()
            .append('path')
            .attr('d', path)
            .attr('fill', function (_, i) { return d3.schemeCategory10[i % 10]; });
        svg.append('g')
            .attr('class', 'sites')
            .selectAll('path')
            .data(points.features)
            .enter()
            .append('path')
            .attr('d', path);
        // gentle animation
        const step = function (elapsed) {
            projection.rotate([elapsed / 150, 0]);
            svg.selectAll('path')
                .attr('d', path);
            window.requestAnimationFrame(step);
        }

        window.requestAnimationFrame(step);
    </script>
</body>

</html>
